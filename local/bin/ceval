#!/bin/sh

EXT=${EXT:-c}
CC=${CC:-clang}
ctmp=`mktemp /tmp/ceval.XXXXXX`.${EXT}

cat > $ctmp << EOF
#define _LARGEFILE64_SOURCE
#include <sys/types.h>

#include <stdlib.h>
#include <stdio.h>

#define _p printf
EOF

cat >> $ctmp << EOF
int
main(int argc, char **argv)
{
EOF

cat >> $ctmp < /dev/stdin

cat >> $ctmp << EOF
	return 0;
}
EOF

$CC $* -o $ctmp.out $ctmp
$ctmp.out
echo
rm -f $ctmp.out $ctmp
